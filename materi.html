<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Materi Gerak Parabola</title>
    <link rel="stylesheet" href="style_materi.css">
</head>
<body>
    <div class="quiz-container">
        <h1>Materi Gerak Parabola üìö</h1>
        <div class="materi-nav">
            <a href="index.html" class="nav-link-btn">üè† Simulasi</a>
            <a href="kuis.html" class="nav-link-btn">üéØ Kuis</a>
        </div>
        
        <div class="materi-page">
            <h2 class="materi-title">Definisi dan Konsep Dasar</h2>
            
            <div class="materi-section">
                <h3>Apa itu Gerak Parabola?</h3>
                <p>Gerak parabola adalah gerak benda yang dilemparkan dengan sudut tertentu terhadap horizontal dan hanya dipengaruhi oleh gaya gravitasi. Gerak ini merupakan gabungan (superposisi) dari dua jenis gerak:</p>
                <ul>
                    <li><b>Gerak Lurus Beraturan (GLB)</b> pada sumbu horizontal (sumbu-x), karena tidak ada gaya yang bekerja secara horizontal (gesekan udara diabaikan). Kecepatannya selalu konstan.</li>
                    <li><b>Gerak Lurus Berubah Beraturan (GLBB)</b> pada sumbu vertikal (sumbu-y), karena ada percepatan gravitasi (g) yang arahnya selalu ke bawah. Kecepatannya berubah-ubah.</li>
                </ul>
                
            </div>

            <div class="materi-section">
                <h3>Rumus-Rumus Kunci</h3>
                <p>Dengan kecepatan awal $v_0$ dan sudut elevasi $\theta$:</p>
                <h4>Analisis Sumbu X (Horizontal)</h4>
                <ul>
                    <li>Kecepatan Horizontal (selalu konstan): $v_x = v_0 \cos(\theta)$</li>
                    <li>Posisi Horizontal: $x = v_x \cdot t$</li>
                </ul>
                <h4>Analisis Sumbu Y (Vertikal)</h4>
                <ul>
                    <li>Kecepatan Awal Vertikal: $v_{0y} = v_0 \sin(\theta)$</li>
                    <li>Kecepatan Vertikal pada waktu t: $v_y = v_{0y} - g \cdot t$</li>
                    <li>Posisi Vertikal pada waktu t: $y = v_{0y} \cdot t - \frac{1}{2}gt^2$</li>
                </ul>
                <h4>Rumus Turunan Penting</h4>
                 <ul>
                    <li>Waktu Mencapai Puncak ($t_p$): $t_p = \frac{v_0 \sin(\theta)}{g}$</li>
                    <li>Tinggi Maksimum ($H_{max}$): $H_{max} = \frac{(v_0 \sin(\theta))^2}{2g}$</li>
                    <li>Jangkauan Terjauh ($R$): $R = \frac{v_0^2 \sin(2\theta)}{g}$</li>
                </ul>
            </div>

            <div class="materi-section">
                <h3>Contoh Soal dan Pembahasan</h3>
                
                <div class="contoh-soal">
                    <h4>Contoh 1: Mencari Tinggi Maksimum</h4>
                    <p><b>Soal:</b> Sebuah bola ditendang dengan kecepatan awal 20 m/s dan sudut elevasi 30¬∞. Tentukan tinggi maksimum yang dicapai bola! (g = 10 m/s¬≤)</p>
                    <div class="pembahasan">
                        <p><b>Diketahui:</b><br>$v_0 = 20$ m/s<br>$\theta = 30^\circ$<br>$g = 10$ m/s¬≤</p>
                        <p><b>Ditanya:</b> Tinggi Maksimum ($H_{max}$)</p>
                        <p><b>Jawab:</b><br>
                        Pertama, cari komponen kecepatan awal vertikal:<br>
                        $v_{0y} = v_0 \sin(\theta) = 20 \cdot \sin(30^\circ) = 20 \cdot 0.5 = 10$ m/s<br><br>
                        Gunakan rumus tinggi maksimum:<br>
                        $H_{max} = \frac{v_{0y}^2}{2g} = \frac{10^2}{2 \cdot 10} = \frac{100}{20} = 5$ meter.<br>
                        Jadi, tinggi maksimum bola adalah <b>5 meter</b>.</p>
                    </div>
                </div>

            </div>
        </div>

        <!-- Chatbot Section -->
        <div class="chatbot-section">
            <h2>ü§ñ Tanya Tutor Fisika</h2>
            <p>Punya pertanyaan tentang gerak parabola? Tanya saja!</p>
            
            <div class="chat-container">
                <div id="chatMessages" class="chat-messages">
                    <div class="bot-message">
                        <div class="message-content">
                            Halo! Saya tutor fisika Anda. Silakan tanyakan apa saja tentang <strong>gerak parabola</strong>! üöÄ
                        </div>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <input type="text" id="chatInput" placeholder="Ketik pertanyaan Anda tentang gerak parabola...">
                    <button id="sendButton" onclick="sendMessage()">Kirim</button>
                </div>
            </div>
        </div>

    </div>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };

        let isTyping = false;

        function addMessage(content, isUser = false) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = isUser ? 'user-message' : 'bot-message';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = content;
            
            messageDiv.appendChild(contentDiv);
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'bot-message typing-indicator';
            typingDiv.id = 'typingIndicator';
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.innerHTML = 'Sedang mengetik<span class="typing-dots"><span></span><span></span><span></span></span>';
            
            typingDiv.appendChild(contentDiv);
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const indicator = document.getElementById('typingIndicator');
            if (indicator) {
                indicator.remove();
            }
        }

        async function sendMessage() {
            const chatInput = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            const message = chatInput.value.trim();
            
            if (!message || isTyping) return;
            
            // Add user message
            addMessage(message, true);
            chatInput.value = '';
            
            // Disable input
            isTyping = true;
            sendButton.disabled = true;
            showTypingIndicator();
            
            try {
                const response = await fetch('/api/chatbot', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${localStorage.getItem('token')}`
                    },
                    body: JSON.stringify({ message })
                });
                
                const data = await response.json();
                
                hideTypingIndicator();
                
                if (response.ok) {
                    addMessage(data.response);
                } else {
                    addMessage('Maaf, terjadi kesalahan. Silakan coba lagi.');
                }
            } catch (error) {
                hideTypingIndicator();
                addMessage('Maaf, tidak dapat terhubung ke server. Silakan coba lagi.');
                console.error('Chat error:', error);
            }
            
            // Re-enable input
            isTyping = false;
            sendButton.disabled = false;
        }

        // Enter key to send message
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !isTyping) {
                sendMessage();
            }
        });
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
</body>
</html>